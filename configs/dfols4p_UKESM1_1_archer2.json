{
    "history": "Test config for DFOLS algorithm and Vn3 of OptClim. Perturbing 4 parameters and using UM_rose. Running on Archer2",
    "Developer_comment": "StudyConfig.py provides methods that work with this configuration file. Remember to change them if you change structure of this.",
    "version": 3,
    "version_comment": "Version ID",
    "Name": "dfols_test",
    "Name_comment": "Study Name",
    "baseRunID": "ts",
    "baseRunID_comment": "base for runID",
    "run_info": {
        "runTime": 1800,
        "runTime_comment": "Time in seconds for run. ",
        "runCode": "n02-TERRAFIRMA",
        "runCode_comment": "Project code to run job with.",
        "submit_engine": null,
        "submit_engine_comment": "Name of engine to submit runs to. See engine.py for allowed values.  Use null if want this guessed. ",
        "ssh_node": null,
	    "ssh_node_comment":"If not null then name of machine which has access to engine. Will ssh to this machine to submit commands",
        "modelName": "UKESM1_1",
        "modelName_comment": "Name of model that is ran. MUST be provided",
        "maxRuns": 1,
        "maxRuns_comment": "Maximum number of runs to do in parallel. Jobs submitted is 2x this + 1.",
	    "max_model_simulations":10,
	    "max_model_simulations_comment":"The maximum number of model sims to be don. Overwrites per algorithm max evaluations",
	    "test_nondetermin":"warning",
	    "test_nondetermin_comment":"If value is error an error is triggered if algorithm appears to be behaving non-deterministically. If value is warning a warning is given. Default is error.",
        "runQueue":"serial",
        "runQueue_comment":"Q to run all jobs in",
        "runExtraArgs":["--qos=serial"],
        "runExtraArgs_comment":"List of extra args for submission. For archer2 need to specify qos for pp job and resubmission",
	"prebuild":true, 
	"prebuild_comment":"If True guess from ref model. If string use as path to prebuild. Path should be on puma2",
	"use_scratch":true,
	"use_scratch_comment":"use scratch space on Archer2. Means models get cleaned up after 28 days.",
	"module_name":"UM_rose"
    },
    "run_info_comment": "Information  for run_info. Must include submit_engine and modelName. Can include other keys for use in submission. Useful ones are runTime, runCode & maxRuns ",
    "logging":"INCLUDE $OPTCLIMTOP/OptClimVn3/configurations/log_config.ijson", 
    "logging_comment":"Including log configuration info.",
    "optimiseFunction": null,
    "optimiseFunction_comment": "Name of optimisation function to run. null gives default",
    "runUpgrade_vn4": "For vn4 add list of things to do here!",
    "initial": {
        "initParams": {
          "_comment": "Initial values for parameters to be optimised. Set to null to use default values.  ",
	      "dp_corr_strat":null,
	      "two_d_fsd_factor":null,
	      "ent_fac_dp":null,
	      "ai":null
},
        "initScale": false,
        "initScale_comment": "If true then startParams range from 0 to 1 where 0 means min value; 1 max value.",
        "fixedParams": {
            "_comment": " List of parameters and values that are fixed and not modified in optimisation. Set to null to use default values",
	    "START_TIME":"2010-09-01",
	    "RUN_TARGET":"P1Y4M"
        },
        "fixedScale": false,
        "fixedScale_comment": "If true then scalable fixedParams range from 0 to 1 where 0 means min value; 1 max value."
        },
        "Parameters": "INCLUDE $OPTCLIMTOP/OptClimVn3/configurations/parameters_UKESM1_1.ijson",
    "study": {
	"comment": "Parameters that specify the study. Used by framework and not by optimisation routines",
        "referenceModelDirectory": "/home/n02/n02-puma/tetts/roses/u-db898",
        "referenceModelDirectory_comment": "Directory where reference model configuration exists. Default is START_DIR/start",
	"covariance": {
	    "comment": "Covariance matrices and operations on them. If CovObsErr and CovIntVar are *both* specified then CovTotal will be computed from them. TODO MOVE coviariance info somewhere else..",
	    "CovTotal": "$OPT_UKESM_ROOT/covariance/Obserr_covariance_2011.csv",
	    "CovTotal_Comment": "Name of file containing Covariance Matrix for total Error. FIXME when have final internal var ",
	    "CovTotalDiagonalise": false,
	    "CovTotalDiagonalise_comment": "If true diagonalise the total covariance matrix",
	    "CovIntVar": null,
	    "CovIntVar_Comment": "Name of file containing Covariance Matrix of Internal Variability. Needs to be set.",
	    "CovIntVarDiagonalise": false,
	    "CovIntVarDiagonalise_comment": "If true diagonalise the internal variability covariance matrix",
	    "CovObsErr":null ,
	    "CovObsErr_Comment": "Name of file containing Covariance Matrix for Observational Error. This is for 2011",
	    "CovObsErrDiagonalise": false,
	    "CovObsErrDiagonalise_comment": "If true diagonalise the Observational Error covariance matrix"
	},
	"ObsList": [
    "RSR_NHX",
    "RSR_T",
    "RSR_SHX",
    "RSR_NHX_L_seas",
    "RSRC_NHX",
    "RSRC_T",
    "RSRC_SHX",
    "RSRC_NHX_L_seas",
    "OLRC_NHX",
    "OLRC_T",
    "OLRC_SHX",
    "OLRC_NHX_L_seas",
    "OLR_NHX",
    "OLR_T",
    "OLR_SHX",
    "OLR_NHX_L_seas",
    "CTP_NHX",
    "CTP_T",
    "CTP_SHX",
    "CTP_NHX_L_seas",
    "CLDliq_NHX",
    "CLDliq_T",
    "CLDliq_SHX",
    "CLDliq_NHX_L_seas",
    "Reff_NHX",
    "Reff_T",
    "Reff_SHX",
    "Reff_NHX_L_seas",
    "RH_NHX@500",
    "RH_T@500",
    "RH_SHX@500",
    "RH_NHX@500_seas",
    "T_NHX@500",
    "T_T@500",
    "T_SHX@500",
    "T_NHX@500_seas",
    "Precip_NHX_L",
    "Precip_T_L",
    "Precip_NHX_L_seas",
    "T2m_NHX_L",
    "T2m_T_L",
    "T2m_NHX_L_seas",
    "MSLP_NHX_DGM",
    "MSLP_T_DGM",
    "MSLP_NHX_DGM_seas",
    "netflux_global"
  ],
  "ObsList_comment": "List of observations used in the target and covariance",
	"constraintName": null,
	"constraintName_comment": "Name of constraint variable -- target value defined by targets/constraintName. "
    },
    "optimise": "INCLUDE $OPT_UKESM_ROOT/configs/optimise_dfols_nocons.ijson",
    "postProcess": {
        "comment": "Options to control post processing. Details depend on your post processing script.",
        "script": "$OPT_UKESM_ROOT/post_process/comp_sim_obs_UKESM1_1.py",
        "script_comment": "Full path name -- including any environment variables you might have -- to postprocessing script",
        "output_path": "observations.json",
        "output_path_comment": "output path relative to model dir -- should be one of .nc, .json or .csv. Default is sim_obs.json",
	"mask_file":"$OPT_UKESM_ROOT/post_process/landfrac_N96.nc",
	"mask_file_comment":"Path for landfrac file.",
	"mask_fraction":0.5,
	"mask_fraction_comment":"Critical Fraction. Specify if mask  is a land/sea fraction. Values >= are land < sea. Set to null if mask is a t/f mask",
	"start_time":"2011-01-01",
	"start_time_comment":"Start time as ISO std string. ",
	"end_time":"2011-12-31",
	"end_time_comment":"End time as str of ISO std string",
	"file_pattern":"*a.pm*.pp",
	"file_pattern_comment":"File pattern to match for post-processing. Use * as wildcard. "
    },
    "targets": "INCLUDE $OPT_UKESM_ROOT/configs/target_2011.ijson",
    "scalings": "INCLUDE $OPT_UKESM_ROOT/configs/scalings.ijson",
      "standardModel": {
    "SimulatedValues": {
      "comment": "Values from UKESM1 run for 2012/2013 . ",
      "temp@500_global": 258.23183096281565,
      "temp@500_nhx": 251.19094862447162,
      "temp@500_tropics": 266.62459492933675,
      "temp@500_shx": 248.48718536811563,
      "rh@500_global": 46.155222578001386,
      "rh@500_nhx": 56.49099976792841,
      "rh@500_tropics": 35.82319944932128,
      "rh@500_shx": 56.48349164543436,
      "olr_global": 241.3706152692112,
      "olr_nhx": 222.76483080049877,
      "olr_tropics": 264.15181651852913,
      "olr_shx": 214.41399723928552,
      "olrc_global": 263.41643028474164,
      "olrc_nhx": 244.32109828058057,
      "olrc_tropics": 285.0960257182804,
      "olrc_shx": 239.15257142182313,
      "rsr_global": 98.27957270190991,
      "rsr_nhx": 103.33666173642017,
      "rsr_tropics": 90.75895279736933,
      "rsr_shx": 108.26372347648034,
      "rsrc_global": 54.613543281373296,
      "rsrc_nhx": 60.965114552593796,
      "rsrc_tropics": 51.11780530458606,
      "rsrc_shx": 55.253447963726835,
      "insw_global": 340.41833087805344,
      "insw_nhx": 281.4590481003498,
      "insw_tropics": 399.3740718622483,
      "insw_shx": 281.46613168736417,
      "lat_global": 286.60816864121125,
      "lat_nhx": 275.26937976908914,
      "lat_tropics": 297.56836297367283,
      "lat_shx": 288.1714935082613,
      "lprecip_global": 2.668843223017746e-05,
      "lprecip_nhx": 1.923742017139813e-05,
      "lprecip_tropics": 3.4210951452646575e-05,
      "lprecip_shx": 2.357360333641164e-05,
      "mslp_global": 101194.46968031532,
      "netflux_global": 0.7681429069323404,
      "netflux_nhx": -44.64244443656917,
      "netflux_tropics": 44.46330254634976,
      "netflux_shx": -41.211589028401576,
      "mslp_nhx_dgm": 394.2607990951219,
      "mslp_tropics_dgm": 90.69621085005929
    }
      }
}
